{"version":3,"file":"boxui.umd.min.js","sources":["../src/components/ui/core.js","../src/components/ui/view.js","../src/components/ui/match.js","../src/components/ui/html.js","../src/components/ui/input.js","../src/components/ui/checkbox.js","../src/components/ui/select.js","../src/components/ui/show.js","../src/components/ui/presence.js","../src/components/ui/portal.js","../src/components/ui/popper.js","../src/components/ui/toggle.js","../src/components/ui/slider.js","../src/components/ui/progress.js","../src/components/ui/menu.js","../src/components/ui/for.js","../src/components/ui/text.js","../src/components/ui/tabs.js","../src/components/ui/steps.js","../src/components/ui/flex.js","../src/components/ui/button.js","../src/components/ui/scrollview.js","../src/components/ui/head.js","../src/components/ui/paragraph.js","../src/components/baseui.js"],"sourcesContent":["/**\n * @template [T=any]\n * @typedef {Object} Ref\n * @property {T} value\n * @property {true} __isRef\n * @property {function({ onChange?: (v: T) => void, onPatch?: (c: any) => void, ignore?: boolean }): void} _subscribe\n */\n\n/**\n * @typedef {Object} ViewClassname\n * @property {function(string): void} del\n * @property {function(string): void} add\n * @property {function(string): void} append\n * @property {function(): string} toString\n * @property {function(any): void} listen\n */\n\n/**\n * @typedef {Object} ViewReturn\n * @property {string} t\n * @property {HTMLElement|Text} $elm\n * @property {function(): (HTMLElement|Text)} render\n * @property {function(HTMLElement|Text): void} onMounted\n * @property {function(): void} beforeUnmounted\n * @property {function(): void} onUnmounted\n */\n\n/**\n * @typedef {ViewReturn} ViewChild\n */\n\n/**\n * @typedef {ViewChild[]} ViewChildren\n */\n\n/**\n * @typedef {Object} ViewProps\n * @property {string} [type]\n * @property {string | Ref<string> | any} [id]\n * @property {string | Ref<string> | any} [style]\n * @property {string | Ref<string> | ViewClassname | any} [class]\n * @property {Record<string, string>} [dataset]\n * @property {function(any): void} [onMounted]\n * @property {function(any): void} [beforeUnmounted]\n * @property {function(any): void} [onUnmounted]\n * @property {function(any): void} [onClick]\n * @property {function(any): void} [onFocus]\n * @property {function(any): void} [onBlur]\n * @property {any} [key]\n */\n\nexport function ref(v) {\n  let _v = v;\n  const deps = [];\n  function notify(patch) {\n    for (let i = 0; i < deps.length; i += 1) {\n      const dep = deps[i];\n      if (dep.onPatch) {\n        dep.onPatch(patch);\n      } else if (dep.onChange) {\n        dep.onChange(_v);\n      }\n    }\n  }\n  function wrap_arr(arr) {\n    const proxy = new Proxy(arr, {\n      get(target, prop, receiver) {\n        if (prop === \"push\") {\n          return function (...items) {\n            const start = target.length;\n            const r = Array.prototype.push.apply(target, items);\n            notify({ type: \"insert\", index: start, items });\n            return r;\n          };\n        }\n        if (prop === \"unshift\") {\n          return function (...items) {\n            const r = Array.prototype.unshift.apply(target, items);\n            notify({ type: \"insert\", index: 0, items });\n            return r;\n          };\n        }\n        if (prop === \"pop\") {\n          return function () {\n            const idx = target.length - 1;\n            const r = Array.prototype.pop.apply(target);\n            notify({ type: \"remove\", index: idx, count: 1 });\n            return r;\n          };\n        }\n        if (prop === \"shift\") {\n          return function () {\n            const r = Array.prototype.shift.apply(target);\n            notify({ type: \"remove\", index: 0, count: 1 });\n            return r;\n          };\n        }\n        if (prop === \"splice\") {\n          return function (start, deleteCount, ...items) {\n            const r = Array.prototype.splice.call(\n              target,\n              start,\n              deleteCount,\n              ...items,\n            );\n            if (deleteCount && deleteCount > 0) {\n              notify({ type: \"remove\", index: start, count: deleteCount });\n            }\n            if (items && items.length > 0) {\n              notify({ type: \"insert\", index: start, items });\n            }\n            return r;\n          };\n        }\n        return Reflect.get(target, prop, receiver);\n      },\n      set(target, prop, value, receiver) {\n        if (prop === \"length\") {\n          const oldLen = target.length;\n          const r = Reflect.set(target, prop, value, receiver);\n          if (value < oldLen) {\n            notify({ type: \"remove\", index: value, count: oldLen - value });\n          }\n          return r;\n        }\n        const idx = Number(prop);\n        const exists = idx >= 0 && idx < target.length;\n        const r = Reflect.set(target, prop, value, receiver);\n        if (!Number.isNaN(idx)) {\n          if (exists) {\n            notify({ type: \"update\", index: idx, item: value });\n          } else {\n            notify({ type: \"insert\", index: idx, items: [value] });\n          }\n        }\n        return r;\n      },\n    });\n    return proxy;\n  }\n  if (Array.isArray(_v)) {\n    _v = wrap_arr(_v);\n  }\n  const ref = {\n    /** @type {any} */\n    __isRef: true,\n    get value() {\n      return _v;\n    },\n    set value(next_v) {\n      if (typeof next_v === \"function\") {\n        _v = next_v(_v);\n      } else {\n        _v = next_v;\n      }\n      if (Array.isArray(_v)) {\n        _v = wrap_arr(_v);\n      }\n      notify({ type: \"reset\" });\n    },\n    _subscribe(ctx) {\n      if (ctx && !ctx.ignore) {\n        deps.push(ctx);\n      }\n    },\n  };\n  return ref;\n}\n\nexport function isRef(v) {\n  return v && typeof v === \"object\" && v.__isRef;\n}\n\nexport function computed(deps, consumer) {\n  let depsObj = null;\n  let computeFn = null;\n  if (typeof deps === \"function\") {\n    computeFn = deps;\n  } else {\n    depsObj = deps || {};\n    computeFn = consumer;\n  }\n  const computed_ref = {\n    /** @type {any} */\n    __isRef: true,\n    _deps: [],\n    _subscribers: [],\n    _addDep(dep) {\n      if (!this._deps.includes(dep)) {\n        this._deps.push(dep);\n        dep._subscribe({\n          onPatch: () => {\n            recompute();\n          },\n        });\n      }\n    },\n    get value() {\n      return _value;\n    },\n    set value(next) {\n      _value = next;\n      notifySubscribers();\n    },\n    _subscribe(ctx) {\n      if (ctx && !ctx.ignore) {\n        this._subscribers.push(ctx);\n      }\n    },\n  };\n  function createDepsProxy() {\n    if (!depsObj) return undefined;\n    return new Proxy(depsObj, {\n      get(target, prop) {\n        const ref = target[prop];\n        if (isRef(ref)) {\n          computed_ref._addDep(ref);\n          return ref.value;\n        }\n        return ref;\n      },\n    });\n  }\n  function compute() {\n    const result = computeFn(createDepsProxy());\n    return result;\n  }\n  let _value = compute();\n  function notifySubscribers() {\n    for (let i = 0; i < computed_ref._subscribers.length; i += 1) {\n      const sub = computed_ref._subscribers[i];\n      if (sub.onPatch) {\n        sub.onPatch({ type: \"reset\" });\n      } else if (sub.onChange) {\n        sub.onChange(_value);\n      }\n    }\n  }\n  function recompute() {\n    _value = compute();\n    notifySubscribers();\n  }\n  return computed_ref;\n}\nexport function isComponent(v) {\n  return v && typeof v.render === \"function\";\n}\nexport function classnames(classname) {\n  let ctx = {\n    onChange(names) {},\n  };\n  let _names = (() => {\n    if (classname) {\n      if (typeof classname === \"object\" && classname.__isRef) {\n        classname._subscribe({\n          onChange(v) {\n            _names = String(v).split(\" \");\n            // console.log(\"[]the className is changed, \", _names);\n            ctx.onChange(_names);\n          },\n        });\n        return String(classname.value).split(\" \");\n      }\n      // console.log(\"[]classnames\", classname);\n      return classname.split(\" \");\n    }\n    return [];\n  })();\n  return {\n    __CN: true,\n    del(v) {\n      _names = _names.filter((vv) => vv !== v);\n    },\n    add(v) {\n      if (_names.includes(v)) {\n        return;\n      }\n      _names.push(v);\n    },\n    append(c) {\n      const segments = c.split(\" \");\n      for (let i = 0; i < segments.length; i += 1) {\n        const v = segments[i];\n        this.add(v);\n      }\n    },\n    listen(c) {\n      ctx = c;\n    },\n    toString() {\n      // console.log(\"[]classnames.toString\", _names);\n      return _names.filter(Boolean).join(\" \");\n    },\n  };\n}\n","import { isRef, isComponent, classnames } from \"./core.js\";\n\n/**\n * @param {import(\"./core.js\").ViewProps} [props]\n * @param {import(\"./core.js\").ViewChildren} [children]\n */\nexport function View(props = {}, children) {\n  const {\n    type = \"div\",\n    style,\n    id: tmpid,\n    class: tmpcn,\n    dataset,\n    onMounted,\n    onClick,\n    onFocus,\n    onBlur,\n    ...restProps\n  } = props;\n  const $elm = document.createElement(type);\n\n  Object.keys(restProps).forEach((k) => {\n    $elm.setAttribute(k, props[k]);\n  });\n  Object.keys(dataset || {}).forEach((k) => {\n    $elm.setAttribute(`data-${k}`, dataset[k]);\n  });\n\n  const class$ = (() => {\n    if (!tmpcn) {\n      return classnames(\"\");\n    }\n    if (tmpcn.__CN) {\n      return tmpcn;\n    }\n    if (isRef(tmpcn)) {\n      return classnames(tmpcn);\n    }\n    return classnames(tmpcn);\n  })();\n  // console.log(\"class$\", class$);\n  class$.listen({\n    onChange(v) {\n      $elm.className = v.join(\" \");\n    },\n  });\n  $elm.className = class$.toString();\n  if (tmpid) {\n    if (isRef(tmpid)) {\n      $elm.id = tmpid.value;\n    } else {\n      $elm.id = tmpid;\n    }\n  }\n\n  if (style) {\n    if (typeof style === \"string\") {\n      $elm.style = style;\n    }\n    if (style.value) {\n      $elm.style = style.value;\n      // console.log(style);\n      style._subscribe({\n        onChange(v) {\n          $elm.style = v;\n        },\n      });\n    }\n  }\n  if (onClick) {\n    // console.log(\"[baseui]View - register click\", props.class, props.dataset);\n    $elm.addEventListener(\"click\", function (event) {\n      // console.log(\"[baseui]View - click\", event.target, props.dataset);\n      if (onClick) {\n        onClick(event);\n      }\n    });\n  }\n  if (onFocus) {\n    $elm.addEventListener(\"focus\", function (event) {\n      onFocus(event);\n    });\n  }\n  if (onBlur) {\n    $elm.addEventListener(\"blur\", function (event) {\n      onBlur(event);\n    });\n  }\n\n  let _children = children ?? [];\n\n  return {\n    t: \"view\",\n    $elm,\n    class$,\n    onMounted() {\n      // console.log(\"[baseui]View - invoke onMounted\", $elm);\n      if (onMounted) {\n        onMounted($elm);\n      }\n      for (let i = 0; i < _children.length; i += 1) {\n        const node = _children[i];\n        if (isComponent(node)) {\n          // @ts-ignore\n          if (node.onMounted) {\n            // @ts-ignore\n            node.onMounted();\n          }\n        }\n      }\n    },\n    beforeUnmounted() {\n      if (props.beforeUnmounted) {\n        props.beforeUnmounted();\n      }\n      for (let i = 0; i < _children.length; i += 1) {\n        const node = _children[i];\n        if (isComponent(node) && node.beforeUnmounted) {\n          node.beforeUnmounted();\n        }\n      }\n    },\n    onUnmounted() {\n      if (props.onUnmounted) {\n        props.onUnmounted();\n      }\n      for (let i = 0; i < _children.length; i += 1) {\n        const node = _children[i];\n        if (isComponent(node) && node.onUnmounted) {\n          node.onUnmounted();\n        }\n      }\n    },\n    append(node) {\n      _children.push(node);\n    },\n    setContent(html) {\n      $elm.innerHTML = html;\n    },\n    render() {\n      for (let i = 0; i < _children.length; i += 1) {\n        const node = _children[i];\n        if (!node) continue;\n        if (typeof node === \"string\" || typeof node === \"number\") {\n          $elm.appendChild(document.createTextNode(String(node)));\n          continue;\n        }\n        if (isComponent(node)) {\n          const result = node.render();\n          if (result) {\n            $elm.appendChild(result);\n          }\n        }\n      }\n      $elm.className = class$.toString();\n      return $elm;\n    },\n  };\n}\n","import { View } from \"./view.js\";\n\nexport function Match(props, renders) {\n  const { when } = props;\n\n  let _when_ref = when;\n  let _prev_condition = null;\n\n  const view$ = View({}, []);\n  const cache = {};\n\n  _when_ref._subscribe({\n    onPatch() {\n      render();\n    },\n  });\n\n  function render() {\n    const condition = when.value;\n    console.log(\"rerender switch\", condition);\n    if (condition === _prev_condition) {\n      // 就是没有变化\n      return;\n    }\n    _prev_condition = condition;\n    const r = renders[condition];\n    if (!r) {\n      return;\n    }\n    view$.$elm.appendChild(r.render());\n  }\n\n  return {\n    t: \"show\",\n    $elm: view$.$elm,\n    onMounted() {\n      view$.onMounted();\n      if (props.onMounted) {\n        props.onMounted();\n      }\n    },\n    beforeUnmounted() {\n      if (props.beforeUnmounted) {\n        props.beforeUnmounted();\n      }\n    },\n    onUnmounted() {\n      if (props.onUnmounted) {\n        props.onUnmounted();\n      }\n      view$.$elm.innerHTML = \"\";\n    },\n    append(node) {},\n    setContent(v) {},\n    render() {\n      render();\n      return view$.$elm;\n    },\n  };\n}\n","export function DangerouslyInnerHTML(html) {\n  const $elm = document.createElement(\"div\");\n  return {\n    t: \"html\",\n    $elm: $elm,\n    render() {\n      $elm.innerHTML = html;\n      return $elm;\n    },\n    onMounted() {},\n    beforeUnmounted() {},\n    onUnmounted() {\n      $elm.innerHTML = \"\";\n    },\n  };\n}\n","import { classnames } from \"./core.js\";\n\nexport function Input(props) {\n  const { store, style, class: tmpcn, dataset, onClick, ...restProps } = props;\n\n  // console.log(\"[BaseUI]Input - render\", store);\n\n  const $elm = document.createElement(\"input\");\n\n  Object.keys(restProps).forEach((k) => {\n    $elm.setAttribute(k, props[k]);\n  });\n  Object.keys(dataset || {}).forEach((k) => {\n    $elm.setAttribute(`data-${k}`, dataset[k]);\n  });\n\n  const class$ = (() => {\n    if (!tmpcn) {\n      return classnames(\"\");\n    }\n    if (tmpcn.__CN) {\n      return tmpcn;\n    }\n    if (tmpcn.__isRef) {\n      return classnames(tmpcn);\n    }\n    return classnames(tmpcn);\n  })();\n  // console.log(\"class$\", class$);\n  class$.listen({\n    onChange(v) {\n      $elm.className = v.join(\" \");\n    },\n  });\n  $elm.className = class$.toString();\n  $elm.style = style;\n  $elm.addEventListener(\"change\", function (event) {\n    /** @type {any} */\n    const target = event.target;\n    store.setValue(target.value);\n  });\n\n  const events = [];\n  const methods = {\n    destroy() {\n      for (let i = 0; i < events.length; i += 1) {\n        events[i]();\n      }\n    },\n  };\n  // store.onValueChange(() => {\n  //   $elm.value = store.value;\n  // });\n\n  if (props.onChange) {\n    // $input.addEventListener(\"input\", props.onChange);\n    // events.push(function () {\n    //   $input.removeEventListener(\"input\", props.onChange);\n    // });\n  }\n\n  return {\n    t: \"view\",\n    $elm,\n    render() {\n      return $elm;\n    },\n    onMounted() {\n      if (props.onMounted) {\n        props.onMounted();\n      }\n    },\n    beforeUnmounted() {\n      if (props.beforeUnmounted) {\n        props.beforeUnmounted();\n      }\n    },\n    onUnmounted() {\n      for (let i = 0; i < events.length; i += 1) {\n        events[i]();\n      }\n      if (props.onUnmounted) {\n        props.onUnmounted();\n      }\n      methods.destroy();\n    },\n  };\n}\n","import { classnames } from \"./core.js\";\n\nexport function Checkbox(props) {\n  const { store, style, class: tmpcn, dataset, onClick, ...restProps } = props;\n\n  // console.log(\"[BaseUI]Checkbox - render\", store);\n\n  const $elm = document.createElement(\"input\");\n  $elm.type = \"checkbox\";\n  Object.keys(restProps).forEach((k) => {\n    $elm.setAttribute(k, props[k]);\n  });\n  Object.keys(dataset || {}).forEach((k) => {\n    $elm.setAttribute(`data-${k}`, dataset[k]);\n  });\n\n  const class$ = (() => {\n    if (!tmpcn) {\n      return classnames(\"\");\n    }\n    if (tmpcn.__CN) {\n      return tmpcn;\n    }\n    if (tmpcn.__isRef) {\n      return classnames(tmpcn);\n    }\n    return classnames(tmpcn);\n  })();\n  // console.log(\"class$\", class$);\n  class$.listen({\n    onChange(v) {\n      $elm.className = v.join(\" \");\n    },\n  });\n  $elm.className = class$.toString();\n  $elm.style = style;\n  $elm.addEventListener(\"change\", function (event) {\n    const /** @type {any} */ target = event.target;\n    // console.log(\"[BaseUI]checkbox change\", store, target.checked);\n    store.setValue(target.checked);\n  });\n\n  const methods = {\n    destroy() {\n      for (let i = 0; i < events.length; i += 1) {\n        events[i]();\n      }\n    },\n  };\n  const events = [];\n  store.onChange(() => {\n    $elm.checked = store.value;\n  });\n\n  if (props.onChange) {\n    // $input.addEventListener(\"input\", props.onChange);\n    // events.push(function () {\n    //   $input.removeEventListener(\"input\", props.onChange);\n    // });\n  }\n\n  return {\n    t: \"view\",\n    $elm,\n    render() {\n      return $elm;\n    },\n    onMounted() {\n      if (props.onMounted) {\n        props.onMounted();\n      }\n    },\n    beforeUnmounted() {\n      if (props.beforeUnmounted) {\n        props.beforeUnmounted();\n      }\n    },\n    onUnmounted() {\n      for (let i = 0; i < events.length; i += 1) {\n        events[i]();\n      }\n      methods.destroy();\n      if (props.onUnmounted) {\n        props.onUnmounted();\n      }\n    },\n  };\n}\n","import { classnames } from \"./core.js\";\n\nexport function Select(props) {\n  const {\n    store,\n    style,\n    class: tmpcn,\n    dataset,\n    options,\n    onChange,\n    ...restProps\n  } = props;\n\n  const $elm = document.createElement(\"select\");\n  Object.keys(restProps).forEach((k) => {\n    $elm.setAttribute(k, props[k]);\n  });\n  Object.keys(dataset || {}).forEach((k) => {\n    $elm.setAttribute(`data-${k}`, dataset[k]);\n  });\n\n  const class$ = (() => {\n    if (!tmpcn) {\n      return classnames(\"\");\n    }\n    if (tmpcn.__CN) {\n      return tmpcn;\n    }\n    if (tmpcn.__isRef) {\n      return classnames(tmpcn);\n    }\n    return classnames(tmpcn);\n  })();\n  // console.log(\"class$\", class$);\n  class$.listen({\n    onChange(v) {\n      $elm.className = v.join(\" \");\n    },\n  });\n  $elm.className = class$.toString();\n  $elm.style = style;\n\n  const events = [];\n\n  $elm.addEventListener(\"change\", function (event) {\n    const /** @type {any} */ target = event.target;\n    store.select(target.value);\n  });\n\n  return {\n    t: \"view\",\n    $elm: $elm,\n    render() {\n      const options = store.options\n        .map((opt) => {\n          return `<option value=\"${opt.value}\">${opt.label}</option>`;\n        })\n        .join(\"\");\n      $elm.innerHTML = options;\n      return $elm;\n    },\n    onMounted() {\n      if (props.onMounted) {\n        props.onMounted();\n      }\n    },\n    beforeUnmounted() {\n      if (props.beforeUnmounted) {\n        props.beforeUnmounted();\n      }\n    },\n    onUnmounted() {\n      for (let i = 0; i < events.length; i += 1) {\n        events[i]();\n      }\n      if (props.onUnmounted) {\n        props.onUnmounted();\n      }\n    },\n    destroy() {\n      for (let i = 0; i < events.length; i += 1) {\n        events[i]();\n      }\n    },\n  };\n}\n","import { View } from \"./view.js\";\nimport { ref, computed, isRef, classnames, isComponent } from \"./core.js\";\n\nexport function Show(props, children) {\n  const { when, fallback, ...rest } = props;\n\n  let _children = children;\n  let _fallback = fallback;\n  let _whenRef = when;\n  let _prev_condition = null;\n  let $parent = null;\n\n  const view$ = View(rest, []);\n  const cache = {};\n\n  _whenRef._subscribe({\n    onPatch() {\n      render();\n    },\n  });\n  let _nodes = [];\n  function render() {\n    const condition = isRef(when) ? when.value : when();\n    // console.log(\"[baseui]Show - refresh\", condition, _prev_condition);\n    if (condition === _prev_condition) {\n      // 就是没有变化\n      return;\n    }\n    if (condition === false && _prev_condition === true) {\n      _prev_condition = condition;\n      for (let i = 0; i < _nodes.length; i += 1) {\n        const node = _nodes[i];\n        if (isComponent(node) && typeof node.onUnmounted === \"function\") {\n          node.onUnmounted();\n        }\n      }\n      _nodes = [];\n      view$.$elm.innerHTML = \"\";\n      return;\n    }\n    if (condition === false) {\n      return;\n    }\n    _prev_condition = condition;\n    const nodes = condition ? _children : _fallback;\n    if (!nodes) {\n      return;\n    }\n    for (let i = 0; i < _nodes.length; i += 1) {\n      const node = _nodes[i];\n      if (isComponent(node) && typeof node.onUnmounted === \"function\") {\n        node.onUnmounted();\n      }\n    }\n    _nodes = nodes;\n    // console.log(\"[baseui]Show - insert content\");\n    const $fragment = document.createDocumentFragment();\n    for (let i = 0; i < nodes.length; i += 1) {\n      const node = nodes[i];\n      const $el = (() => {\n        if (isComponent(node)) {\n          const result = node.render();\n          if (result) {\n            return result;\n          }\n        } else if (typeof node === \"string\" || typeof node === \"number\") {\n          // $fragment.appendChild(document.createTextNode(String(node)));\n          return document.createTextNode(String(node));\n        } else if (node) {\n          // $fragment.appendChild(node);\n          return node;\n        }\n        return null;\n      })();\n      if ($el) {\n        $fragment.appendChild($el);\n      }\n    }\n    // cache[condition] = $fragment;\n    view$.$elm.innerHTML = \"\";\n    view$.$elm.appendChild($fragment);\n\n    // console.log(\"[baseui]Show - before insert to $parent\", $parent);\n    // if ($parent) {\n    //   // 本来是 hidden，可见后，$parent 有了值。再 hide、open，就到这个分支\n    //   console.log(\"[baseui]Show - insert to $parent\");\n    //   $parent.appendChild(view$.$elm);\n    // } else {\n    //   console.log(\"[baseui]Show - no $parent\", view$.$elm.parentNode);\n    //   console.log(view$.$elm.parentNode);\n    //   $parent = view$.$elm.parentNode;\n    // }\n    // console.log(\"[baseui]Show - before invoke view$.onMounted\");\n\n    // view$.onMounted();\n    for (let i = 0; i < _nodes.length; i += 1) {\n      const node = _nodes[i];\n      if (isComponent(node) && typeof node.onMounted === \"function\") {\n        node.onMounted();\n      }\n    }\n  }\n\n  return {\n    t: \"show\",\n    $elm: view$.$elm,\n    onMounted() {\n      if (view$.$elm.parentNode) {\n        $parent = view$.$elm.parentNode;\n      }\n      if (props.onMounted) {\n        props.onMounted();\n      }\n      // console.log(\"[baseui]Show - onMounted\", _nodes);\n      // view$.onMounted();\n      // for (let i = 0; i < _nodes.length; i += 1) {\n      //   const node = _nodes[i];\n      //   if (isComponent(node) && typeof node.onMounted === \"function\") {\n      //     node.onMounted();\n      //   }\n      // }\n    },\n    beforeUnmounted() {\n      if (props.beforeUnmounted) {\n        props.beforeUnmounted();\n      }\n      for (let i = 0; i < _nodes.length; i += 1) {\n        const node = _nodes[i];\n        if (isComponent(node) && typeof node.beforeUnmounted === \"function\") {\n          node.beforeUnmounted();\n        }\n      }\n    },\n    onUnmounted() {\n      if (props.onUnmounted) {\n        props.onUnmounted();\n      }\n      for (let i = 0; i < _nodes.length; i += 1) {\n        const node = _nodes[i];\n        if (isComponent(node) && typeof node.onUnmounted === \"function\") {\n          node.onUnmounted();\n        }\n      }\n      view$.$elm.innerHTML = \"\";\n    },\n    append(node) {\n      _children.push(node);\n    },\n    setContent(v) {},\n    render() {\n      render();\n      // view$.append();\n      // return ;\n      return view$.$elm;\n    },\n  };\n}\n","import { ref, computed } from \"./core.js\";\nimport { Show } from \"./show.js\";\nimport { View } from \"./view.js\";\n\nexport function Presence(props, children) {\n  const { store, animation, ...rest } = props;\n  const state = ref(store.state);\n  const visible = computed({ state }, (draft) => {\n    // console.log(\n    //   \"[baseui]Presence - before \",\n    //   draft.state.mounted,\n    //   draft.state.visible,\n    // );\n    return draft.state.mounted && draft.state.visible;\n  });\n\n  const unsubscribe = store.onStateChange(() => {\n    state.value = store.state;\n  });\n\n  return Show({\n    ...rest,\n    onUnmounted() {\n      if (unsubscribe) {\n        unsubscribe();\n      }\n      if (rest.onUnmounted) {\n        rest.onUnmounted();\n      }\n    },\n    when: visible,\n    dataset: {\n      // \"state\": ,\n    },\n    class: computed({ state }, (draft) => {\n      return [\n        \"presence\",\n        rest.class,\n        draft.state.enter ? (animation?.in ?? \"fade-in\") : \"\",\n        draft.state.exit ? (animation?.out ?? \"fade-out\") : \"\",\n      ]\n        .filter(Boolean)\n        .join(\" \");\n    }),\n  }, children);\n}\n","import { View } from \"./view.js\";\n\nexport function Portal(props, children) {\n  const view$ = View(props, children);\n\n  return {\n    t: \"view\",\n    $elm: view$.$elm,\n    render() {\n      const $elm = view$.render();\n      document.body.appendChild($elm);\n      return null;\n    },\n    onUnmounted() {\n      if (view$.$elm && view$.$elm.parentNode) {\n        view$.$elm.parentNode.removeChild(view$.$elm);\n      }\n      if (view$.onUnmounted) {\n        view$.onUnmounted();\n      }\n      if (props.onUnmounted) {\n        props.onUnmounted();\n      }\n    },\n  };\n}\n","import { ref, computed } from \"./core.js\";\nimport { View } from \"./view.js\";\nimport { Portal } from \"./portal.js\";\nimport { Presence } from \"./presence.js\";\n\nexport function Popper(props, children) {\n  const state = ref(props.store.state);\n  let unsubscribe;\n\n  const content$ = View(\n    {\n      class: \"portal z-[999]\",\n      style: computed({ state }, (draft) => {\n        const ss = {\n          \"z-index\": 999,\n          position: \"fixed\",\n          left: 0,\n          top: 0,\n          opacity: draft.state.isPlaced ? 100 : 0,\n          transform: draft.state.isPlaced\n            ? `translate3d(${Math.round(draft.state.x)}px, ${Math.round(draft.state.y)}px, 0)`\n            : \"translate3d(0, -200%, 0)\",\n        };\n        return Object.keys(ss)\n          .map((k) => {\n            return `${k}: ${ss[k]}`;\n          })\n          .join(\"; \");\n      }),\n      onMounted($e) {\n        props.store.setFloating({\n          $el: $e,\n          getRect() {\n            const rect = $e.getBoundingClientRect();\n            console.log(\n              \"[COMPONENT]PopperContent - getRect of floating\",\n              $e,\n              rect,\n            );\n            return rect;\n          },\n        });\n      },\n      onUnmounted() {\n        if (typeof unsubscribe === \"function\") {\n          unsubscribe();\n        }\n        props.store.setFloating(null);\n      },\n    },\n    children,\n  );\n  unsubscribe = props.store.onStateChange(() => {\n    console.log(\n      \"[baseui]Popover props.store.onStateChange\",\n      props.store.state.isPlaced,\n      props.store.state.visible,\n    );\n    state.value = props.store.state;\n  });\n\n  // return Presence(\n  //   {\n  //     store: props.store.present,\n  //     animation: {\n  //       in: \"fade-in\",\n  //       out: \"fade-out\",\n  //     },\n  //   },\n  //   [content$],\n  // );\n  return content$;\n}\n","import { View } from \"./view.js\";\nimport { computed } from \"./core.js\";\n\n/**\n * Toggle Component (UI Switch)\n * @param {{ value: any, disabled?: boolean, class?: string }} props\n */\nexport function Toggle(props) {\n  const { value, disabled } = props;\n  const state = value; // assume value is a ref\n\n  return View(\n    {\n      type: \"button\",\n      class: computed({ state }, (draft) => {\n        return [\n          \"relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-600 focus-visible:ring-offset-2\",\n          draft.state ? \"bg-blue-600\" : \"bg-gray-200\",\n          disabled ? \"opacity-50 cursor-not-allowed\" : \"\",\n          props.class,\n        ]\n          .filter(Boolean)\n          .join(\" \");\n      }),\n      onClick() {\n        if (disabled) return;\n        state.value = !state.value;\n      },\n    },\n    [\n      View({\n        type: \"span\",\n        class: computed({ state }, (draft) => {\n          return [\n            \"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out\",\n            draft.state ? \"translate-x-5\" : \"translate-x-0\",\n          ].join(\" \");\n        }),\n      }),\n    ],\n  );\n}\n","import { View } from \"./view.js\";\nimport { computed, isRef, ref } from \"./core.js\";\n\n/**\n * Slider Component (Custom Implementation)\n * @param {Object} props\n * @param {any} props.value - The current value of the slider\n * @param {number} [props.min=0] - The minimum value\n * @param {number} [props.max=100] - The maximum value\n * @param {number} [props.step=1] - The step increment\n * @param {boolean} [props.disabled] - Whether the slider is disabled\n * @param {(val: number) => void} [props.onChange] - Callback function when value changes\n * @param {string} [props.class] - Additional CSS classes\n * @param {() => void} [props.onUnmounted] - Cleanup callback\n */\nexport function Slider(props) {\n  const min = props.min ?? 0;\n  const max = props.max ?? 100;\n  const step = props.step ?? 1;\n  const disabled = props.disabled;\n  const onChange = props.onChange;\n\n  const valueRef = isRef(props.value) ? props.value : ref(props.value ?? min);\n\n  const containerRef = { current: null };\n  const isDragging = ref(false);\n  let cleanupDrag;\n\n  // Calculate percentage for CSS\n  const percentage = computed({ value: valueRef }, (draft) => {\n    const val = draft.value;\n    const clamped = Math.min(Math.max(val, min), max);\n    return ((clamped - min) / (max - min)) * 100;\n  });\n\n  const updateValue = (clientX) => {\n    if (disabled || !containerRef.current) return;\n\n    const rect = containerRef.current.getBoundingClientRect();\n    const x = Math.max(0, Math.min(clientX - rect.left, rect.width));\n    const rawPercentage = x / rect.width;\n\n    let newValue = min + rawPercentage * (max - min);\n\n    // Apply step\n    if (step > 0) {\n      const steps = Math.round((newValue - min) / step);\n      newValue = min + steps * step;\n    }\n\n    // Clamp\n    newValue = Math.max(min, Math.min(newValue, max));\n\n    // Update ref if changed\n    if (newValue !== valueRef.value) {\n      valueRef.value = newValue;\n      if (onChange) {\n        onChange(newValue);\n      }\n    }\n  };\n\n  const onPointerDown = (e) => {\n    if (disabled) return;\n    isDragging.value = true;\n    updateValue(e.clientX);\n\n    // Capture pointer to handle dragging outside the element\n    e.target.setPointerCapture(e.pointerId);\n\n    const onPointerMove = (moveEvent) => {\n      if (!isDragging.value) return;\n      updateValue(moveEvent.clientX);\n    };\n\n    const onPointerUp = (upEvent) => {\n      isDragging.value = false;\n      upEvent.target.releasePointerCapture(upEvent.pointerId);\n      document.removeEventListener(\"pointermove\", onPointerMove);\n      document.removeEventListener(\"pointerup\", onPointerUp);\n      cleanupDrag = null;\n    };\n\n    document.addEventListener(\"pointermove\", onPointerMove);\n    document.addEventListener(\"pointerup\", onPointerUp);\n\n    cleanupDrag = () => {\n      document.removeEventListener(\"pointermove\", onPointerMove);\n      document.removeEventListener(\"pointerup\", onPointerUp);\n      cleanupDrag = null;\n    };\n  };\n\n  const track = View(\n    {\n      class:\n        \"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary/20 bg-gray-200\",\n    },\n    [\n      View({\n        class: \"h-full bg-blue-600 transition-all\",\n        style: computed(\n          { percentage },\n          (draft) => `width: ${draft.percentage}%`,\n        ),\n      }),\n    ],\n  );\n\n  const thumb = View({\n    class: computed(\n      { percentage },\n      (draft) =>\n        `absolute top-1/2 block h-5 w-5 -translate-y-1/2 rounded-full border-2 border-primary bg-white shadow-md ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50`,\n    ),\n    style: computed(\n      { percentage },\n      (draft) =>\n        `left: ${draft.percentage}%; transform: translate(-50%, -50%);`,\n    ),\n  });\n\n  return View(\n    {\n      class: computed({}, () => {\n        return [\n          \"relative flex w-full touch-none select-none items-center py-4 cursor-pointer\", // Added padding for better touch area\n          disabled ? \"opacity-50 cursor-not-allowed\" : \"\",\n          props.class,\n        ]\n          .filter(Boolean)\n          .join(\" \");\n      }),\n      onUnmounted: () => {\n        if (cleanupDrag) {\n          cleanupDrag();\n        }\n        if (props.onUnmounted) {\n          props.onUnmounted();\n        }\n      },\n      onMounted: (elm) => {\n        containerRef.current = elm;\n        // Use pointer events for unified mouse/touch handling\n        elm.addEventListener(\"pointerdown\", onPointerDown);\n      },\n    },\n    [track, thumb],\n  );\n}\n","import { View } from \"./view.js\";\nimport { computed, isRef } from \"./core.js\";\n\n/**\n * Progress Component\n */\nexport function Progress(props) {\n  const { value, max = 100 } = props;\n\n  const result = View(\n    {\n      class: computed({}, () =>\n        [\n          \"relative w-full overflow-hidden rounded-full bg-gray-100 dark:bg-gray-800 h-2\",\n          props.class,\n        ]\n          .filter(Boolean)\n          .join(\" \"),\n      ),\n    },\n    [\n      View({\n        class: \"h-full bg-blue-600 transition-all duration-300 ease-in-out\",\n        style: computed({ value }, (draft) => {\n          const val = isRef(value) ? draft.value : value;\n          const percentage = Math.min(Math.max((val / max) * 100, 0), 100);\n          return `width: ${percentage}%`;\n        }),\n      }),\n    ],\n  );\n  if (props.onMounted) {\n    const originalOnMounted = result.onMounted;\n    result.onMounted = (elm) => {\n      // if (originalOnMounted) originalOnMounted(elm);\n      props.onMounted(elm);\n    };\n  }\n  if (props.beforeUnmounted) {\n    result.beforeUnmounted = () => {\n      props.beforeUnmounted();\n    };\n  }\n  if (props.onUnmounted) {\n    const originalOnUnmounted = result.onUnmounted;\n    result.onUnmounted = () => {\n      if (originalOnUnmounted) originalOnUnmounted();\n      props.onUnmounted();\n    };\n  }\n  return result;\n}\n","import { View } from \"./view.js\";\nimport { Popper } from \"./popper.js\";\n\n/**\n * Menu Component\n */\nexport function Menu(props, children) {\n  return View(\n    {\n      ...props,\n      class: [\n        \"min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-700 shadow-md\",\n        props.class,\n      ]\n        .filter(Boolean)\n        .join(\" \"),\n    },\n    children,\n  );\n}\n\nexport function MenuItem(props, children) {\n  const { store, class: cn, ...rest } = props;\n  return View(\n    {\n      ...rest,\n      onClick() {\n        // console.log(\"[COMPONENT]MenuItemImpl - on click\");\n        store.handleClick();\n      },\n      onFocus() {\n        // console.log(\"[COMPONENT]MenuItemImpl - on focus\");\n        store.handleFocus();\n      },\n      onBlur() {\n        store.handleBlur();\n      },\n      class: [\n        \"relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-gray-100 hover:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n        cn,\n      ]\n        .filter(Boolean)\n        .join(\" \"),\n    },\n    children,\n  );\n}\n\nexport function MenuLabel(props, children) {\n  return View(\n    {\n      ...props,\n      class: [\"px-2 py-1.5 text-sm font-semibold text-gray-900\", props.class]\n        .filter(Boolean)\n        .join(\" \"),\n    },\n    children,\n  );\n}\n\nexport function MenuSeparator(props) {\n  return View({\n    ...props,\n    class: [\"-mx-1 my-1 h-px bg-gray-100\", props.class]\n      .filter(Boolean)\n      .join(\" \"),\n  });\n}\n\n/**\n * DropdownMenu Component\n * Uses Popover and a Trigger\n */\nexport function DropdownMenu(props, children) {\n  const { store, ...rest } = props;\n  let handleClickOutside;\n\n  // console.log(\"[baseui]DropdownMenu\", store);\n\n  const state = ref(store.state);\n  // const popper = ref(store.menu.popper);\n  const menus = computed({ state }, (draft) => {\n    // console.log(\"[baseui]DropdownMenu\", draft.state.items);\n    return draft.state.items;\n  });\n\n  // console.log(\"[baseui]menu - DropdownMenu \", store.menu.popper);\n\n  return View(\n    {\n      ...rest,\n      onMounted($e) {\n        // const floating = $e.getBoundingClientRect();\n        // store.menu.popper.place2(floating);\n        if (rest.onMounted) {\n          rest.onMounted($e);\n        }\n\n        handleClickOutside = (event) => {\n          console.log(\n            \"[baseui]DropdownMenu - handleClickOutside\",\n            event.target,\n          );\n          if (!document.body.contains($e)) {\n            console.log(\n              \"[baseui]DropdownMenu - handleClickOutside - not contains\",\n            );\n            document.removeEventListener(\"click\", handleClickOutside);\n            return;\n          }\n\n          if ($e.contains(event.target)) {\n            console.log(\"[baseui]DropdownMenu - handleClickOutside - contains\");\n            return;\n          }\n\n          const popperEl = store.menu.popper.floating?.$el;\n          if (popperEl && popperEl.contains(event.target)) {\n            console.log(\n              \"[baseui]DropdownMenu - handleClickOutside - is in popper\",\n            );\n            return;\n          }\n\n          // Fallback for when ref is not available but click is in a portal\n          if (event.target.closest(\".portal\")) {\n            console.log(\n              \"[baseui]DropdownMenu - handleClickOutside - is in portal\",\n            );\n            return;\n          }\n\n          console.log(\"[baseui]DropdownMenu - handleClickOutside - store.hide\");\n          // document.removeEventListener(\"click\", handleClickOutside);\n          store.hide();\n        };\n\n        console.log(\"[baseui]DropdownMenu - before add click event listener\");\n        document.addEventListener(\"click\", handleClickOutside);\n      },\n      onUnmounted() {\n        if (handleClickOutside) {\n          document.removeEventListener(\"click\", handleClickOutside);\n        }\n        if (rest.onUnmounted) {\n          rest.onUnmounted();\n        }\n      },\n      onClick(event) {\n        const rect = event.currentTarget.getBoundingClientRect();\n        const { clientHeight, clientWidth } = event.currentTarget;\n        console.log(rect);\n        store.toggle({\n          x: rect.left,\n          y: rect.top + clientHeight,\n        });\n      },\n    },\n    [\n      ...children,\n      Portal({}, [\n        Presence({ store: store.menu.presence }, [\n          Popper({ store: store.menu.popper }, [\n            For({\n              class:\n                \"min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-700 shadow-md\",\n              each: menus,\n              render(menu) {\n                return View({}, [\n                  MenuItem(\n                    {\n                      store: menu,\n                    },\n                    [Txt(menu.label)],\n                  ),\n                ]);\n              },\n            }),\n          ]),\n        ]),\n      ]),\n    ],\n  );\n}\n","import { View } from \"./view.js\";\nimport { isComponent, isRef } from \"./core.js\";\nimport { Show } from \"./show.js\";\n\nexport function For(props) {\n  const { each, render, ...restProps } = props;\n  const view$ = View(restProps);\n  const $elm = view$.$elm;\n  $elm.setAttribute(\"for-wrapper\", \"true\");\n  let _items = [];\n  let _children = [];\n  let _doms = [];\n  const _existing_map = new Map();\n  // const _existing_map_by_id = new Map();\n  function _render_item(item, index) {\n    const rr = (() => {\n      const node = render(item, index);\n      if (!node) {\n        return { node: null, elm: null, empty: true };\n      }\n      if (typeof node.render === \"function\") {\n        const elm = node.render();\n        return { node, elm };\n      }\n      if (typeof node === \"string\" || typeof node === \"number\") {\n        return { node: null, elm: document.createTextNode(String(node)) };\n      }\n      return { node: null, elm: node };\n    })();\n    return rr;\n  }\n  function _insert(index, items) {\n    console.log(\"[For]_insert - handle\", index, items.length);\n    for (let i = 0; i < items.length; i += 1) {\n      (() => {\n        const res = _render_item(items[i], index + i);\n        if (!res) {\n          return;\n        }\n        if (res.delete) {\n          return;\n        }\n        // const refElm = $container.childNodes[index + i] || null;\n        // $container.insertBefore(res.elm, refElm);\n        // console.log(\n        //   \"[For]_insert - before appendChild\",\n        //   i,\n        //   $container.innerHTML,\n        // );\n        $elm.appendChild(res.elm);\n        if (isComponent(res.node) && typeof res.node.onMounted === \"function\") {\n          res.node.onMounted();\n        }\n      })();\n      // _items.splice(index + i, 0, items[i]);\n      // _children.splice(index + i, 0, res.node || res.elm);\n      // _doms.splice(index + i, 0, res.elm);\n    }\n  }\n  function _remove(index, count) {\n    for (let i = 0; i < count; i += 1) {\n      const elm = _doms[index];\n      if (elm && elm.parentNode === $elm) {\n        $elm.removeChild(elm);\n      }\n      const item = _items[index];\n      if (_existing_map.has(item)) {\n        _existing_map.delete(item);\n      }\n      _items.splice(index, 1);\n      _children.splice(index, 1);\n      _doms.splice(index, 1);\n    }\n  }\n  function _update(index, item) {\n    const res = _render_item(item, index);\n    if (!res) return;\n    if (res.delete) return;\n    const old = _doms[index];\n    if (old && old.parentNode === $elm) {\n      $elm.replaceChild(res.elm, old);\n    } else {\n      $elm.appendChild(res.elm);\n      if (res.onMounted) {\n        res.onMounted();\n      }\n    }\n\n    const oldItem = _items[index];\n    if (oldItem !== item && _existing_map.has(oldItem)) {\n      _existing_map.delete(oldItem);\n    }\n\n    _items[index] = item;\n    _children[index] = res.node || res.elm;\n    _doms[index] = res.elm;\n  }\n  const ctx = {\n    onPatch(change) {\n      console.log(\"[baseui]For - ctx.onPatch - handle change\", change);\n      if (!change || !change.type) {\n        return;\n      }\n      if (change.type === \"insert\") {\n        _insert(change.index, change.items || []);\n        return;\n      }\n      if (change.type === \"remove\") {\n        _remove(change.index, change.count || 0);\n        return;\n      }\n      if (change.type === \"update\") {\n        _update(change.index, change.item);\n        return;\n      }\n      if (change.type === \"reset\") {\n        const remaining_items = [];\n        const items = each.value;\n        for (let i = 0; i < items.length; i += 1) {\n          (() => {\n            const item = items[i];\n            const existing = _existing_map.get(item);\n            console.log(\n              \"[baseui]For - render_item1\",\n              _existing_map.size,\n              item,\n              existing,\n            );\n            if (existing) {\n              _existing_map.delete(item);\n              remaining_items.push([item, existing]);\n              return;\n            }\n            const res = _render_item(items[i], i);\n            if (!res) {\n              return;\n            }\n            remaining_items.push([item, res]);\n            $elm.appendChild(res.elm);\n          })();\n        }\n        _existing_map.forEach((res, item) => {\n          if (res.elm) {\n            console.log(\"[baseui]For - before remove deleted item\", item);\n            $elm.removeChild(res.elm);\n          }\n        });\n        _existing_map.clear();\n        for (const [item, res] of remaining_items) {\n          _existing_map.set(item, res);\n        }\n      }\n    },\n    onChange() {},\n  };\n  // let _nodes = [];\n\n  return {\n    t: \"for\",\n    $elm: $elm,\n    onMounted() {\n      // console.log(\"[baseui]For - onMounted\", nodes);\n      if (props.onMounted) {\n        props.onMounted();\n      }\n      // for (const node of nodes) {\n      //   if (typeof node.onMounted === \"function\") {\n      //     node.onMounted();\n      //   }\n      // }\n    },\n    beforeUnmounted() {\n      if (props.beforeUnmounted) {\n        props.beforeUnmounted();\n      }\n    },\n    onUnmounted() {\n      if (props.onUnmounted) {\n        props.onUnmounted();\n      }\n      $elm.innerHTML = \"\";\n    },\n    append(node) {\n      // _children.push(node);\n    },\n    setContent(v) {},\n    render() {\n      const items = (() => {\n        if (isRef(each)) {\n          each._subscribe(ctx);\n          return each.value;\n        }\n        // 直接传数组的场景，固定渲染一些值\n        return each || [];\n      })();\n      // console.log(\"[For]render - handle\", items);\n      // console.log(items);\n      // _items = items.slice();\n      // _children = [];\n      // _doms = [];\n      const _nodes = [];\n      // console.log(\"in For before items.length for\", items);\n      for (let i = 0; i < items.length; i += 1) {\n        (() => {\n          const item = items[i];\n          // const existing = _existing_map.get(item);\n          // console.log(\n          //   \"[baseui]For - render_item1\",\n          //   _existing_map.size,\n          //   item,\n          //   existing,\n          // );\n          // if (existing) {\n          //   _existing_map.delete(item);\n          //   return;\n          // }\n          const res = _render_item(item, i);\n          if (!res) {\n            return;\n          }\n          // if (res.existing) {\n          //   return;\n          // }\n          // added_items.push([item, res]);\n          _existing_map.set(item, res);\n          $elm.appendChild(res.elm);\n          _nodes.push(res.node);\n        })();\n        // 这里到底要不要调用？\n        // for (const node of nodes) {\n        //   node.onMounted();\n        // }\n      }\n      return $elm;\n    },\n  };\n}\n","/**\n * @param {import(\"./core.js\").Ref<any> | string} state\n */\nexport function Txt(state) {\n  let _text = (() => {\n    if (state && typeof state === \"object\" && state.__isRef) {\n      state._subscribe({\n        onChange(v) {\n          $elm.textContent = v;\n        },\n      });\n      return state.value;\n    }\n    return state;\n  })();\n  const $elm = document.createTextNode(_text);\n  return {\n    t: \"text\",\n    $elm,\n    render() {\n      return $elm;\n    },\n    onMounted() {},\n    beforeUnmounted() {},\n    onUnmounted() {},\n  };\n}\n","import { View } from \"./view.js\";\nimport { For } from \"./for.js\";\nimport { Show } from \"./show.js\";\nimport { computed } from \"./core.js\";\nimport { Txt } from \"./text.js\";\n\n/**\n * Tabs Component\n * @param {{ value: any, items: Array<{label: string, value: string, content: any}>, class?: string }} props\n */\nexport function Tabs(props) {\n  const { value, items, class: className } = props;\n  const active = value; // ref\n\n  return View({ class: [\"w-full\", className].filter(Boolean).join(\" \") }, [\n    View({ class: \"flex border-b border-gray-200 mb-4\" }, [\n      For({\n        each: items, // assuming static items array\n        render(item) {\n          return Button(\n            {\n              class: computed({ active }, (draft) => {\n                const isActive = draft.active === item.value;\n                return [\n                  \"px-4 py-2 text-sm font-medium transition-colors border-b-2 -mb-px focus:outline-none\",\n                  isActive\n                    ? \"border-blue-500 text-blue-600\"\n                    : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\",\n                ].join(\" \");\n              }),\n              onclick: () => {\n                active.value = item.value;\n              },\n            },\n            [Txt(item.label)],\n          );\n        },\n      }),\n    ]),\n    View({ class: \"tab-content\" }, [\n      For({\n        each: items,\n        render(item) {\n          return Show({\n            when: computed({ active }, (draft) => draft.active === item.value),\n          }, [item.content]);\n        },\n      }),\n    ]),\n  ]);\n}\n","import { View } from \"./view.js\";\nimport { For } from \"./for.js\";\nimport { Show } from \"./show.js\";\nimport { computed } from \"./core.js\";\nimport { Txt } from \"./text.js\";\n\n/**\n * Steps Component\n * @param {{ current: any, items: Array<{title: string, description?: string}>, class?: string }} props\n */\nexport function Steps(props) {\n  const { current, items, class: className } = props;\n\n  return View({ class: [\"w-full\", className].filter(Boolean).join(\" \") }, [\n    View({ class: \"flex items-center justify-between\" }, [\n      For({\n        each: items,\n        render: (item, index) => {\n          const stepIndex = index;\n          return View({ class: \"flex flex-1 items-center\" }, [\n            View({ class: \"flex flex-col items-center relative z-10\" }, [\n              View(\n                {\n                  class: computed({ current }, (draft) => {\n                    const isCompleted = stepIndex < draft.current;\n                    const isCurrent = stepIndex === draft.current;\n                    return [\n                      \"w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold transition-colors duration-200\",\n                      isCompleted || isCurrent\n                        ? \"bg-blue-600 text-white\"\n                        : \"bg-gray-200 text-gray-500\",\n                    ].join(\" \");\n                  }),\n                },\n                [Txt(String(stepIndex + 1))],\n              ),\n              View({ class: \"mt-2 text-xs font-medium text-gray-500\" }, [\n                Txt(item.title),\n              ]),\n            ]),\n            // Line connector\n            Show({\n              when: computed(() => stepIndex < items.length - 1),\n            }, [\n                View({\n                  class: computed({ current }, (draft) => {\n                    const isCompleted = stepIndex < draft.current;\n                    return [\n                      \"h-[2px] w-full flex-1 mx-2 transition-colors duration-200\",\n                      isCompleted ? \"bg-blue-600\" : \"bg-gray-200\",\n                    ].join(\" \");\n                  }),\n                }),\n              ]),\n          ]);\n        },\n      }),\n    ]),\n  ]);\n}\n","import { classnames } from \"./core.js\";\nimport { View } from \"./view.js\";\n\nexport function Flex(props, children) {\n  const { justify, items, class: cn, ...rest } = props;\n  // const class$ = ViewClassname(\"flex\");\n  const class$ = classnames([\"flex\", cn].join(\" \"));\n  if (justify) {\n    class$.add(` justify-${props.justify}`);\n  }\n  if (items) {\n    class$.add(` items-${props.items}`);\n  }\n  const view$ = View({ ...rest, class: class$ }, children);\n  return view$;\n}\n","import { View } from \"./view.js\";\n\nexport function Button(props, children) {\n  const { class: classname = \"\", ...restProps } = props;\n  const view$ = View(\n    {\n      type: \"button\",\n      class: classname,\n      ...restProps,\n    },\n    children,\n  );\n  return view$;\n}\n","import { View } from \"./view.js\";\nimport { ref, computed } from \"./core.js\";\n\nexport function ScrollView(props, children) {\n  const { store, ...rest } = props;\n  const cn = ref(rest.class);\n  const progress$ = View(\n    {\n      class: \"w-[50px] h-[50px] mx-auto rounded-full bg-w-bg-0\",\n    },\n    [\n      View({\n        class: \"inline-flex justify-center items-center w-full h-full\",\n        style: \"transition: all 300ms;\",\n      }),\n    ],\n  );\n  const indicator$ = View(\n    {\n      class:\n        \"scroll-view-indicator relative w-full overflow-hidden text-center\",\n    },\n    [\n      View(\n        {\n          class: \"absolute left-0 bottom-0 w-full min-h-[30px] py-[10px]\",\n        },\n        [progress$],\n      ),\n    ],\n  );\n  const view$ = View(\n    {\n      class: computed({ cn }, (draft) =>\n        [\"scroll-view w-full h-full overflow-y-auto\", draft.cn].join(\" \"),\n      ),\n    },\n    [indicator$, ...children],\n  );\n  const rotate = ref(false);\n\n  props.store.inDownOffset(() => {\n    rotate.value = false;\n    progress$.$elm.style.display = \"block\";\n  });\n  props.store.outDownOffset(() => {\n    rotate.value = true;\n    progress$.$elm.style.display = \"none\";\n  });\n\n  /** @ts-ignore */\n  TimelessWeb.provide_ui_scroll_view_indicator(props.store, indicator$.$elm);\n  /** @ts-ignore */\n  TimelessWeb.provide_ui_scroll_view_scroll(props.store, view$.$elm);\n\n  return {\n    t: \"view\",\n    $elm: view$.$elm,\n    onMounted() {\n      // 所有 component 都要返回 onMounted，调用 view$.onMounted 和 props.onMounted\n      props.store.setRect({\n        width: view$.$elm.clientWidth,\n        height: view$.$elm.clientHeight,\n      });\n      view$.onMounted();\n      if (props.onMounted) {\n        props.onMounted();\n      }\n    },\n    beforeUnmounted() {\n      if (props.beforeUnmounted) {\n        props.beforeUnmounted();\n      }\n    },\n    onUnmounted() {\n      view$.onUnmounted();\n      if (props.onUnmounted) {\n        props.onUnmounted();\n      }\n    },\n    render() {\n      return view$.render();\n    },\n  };\n}\n","import { View } from \"./view.js\";\nimport { classnames } from \"./core.js\";\n\nexport function Head2(props, children) {\n  const class$ = classnames(\"flex\");\n  return View(\n    {\n      type: \"h2\",\n      class: class$.toString(),\n    },\n    children,\n  );\n}\n","import { View } from \"./view.js\";\nimport { isRef, classnames } from \"./core.js\";\n\nexport function Paragraph(props, children) {\n  const class$ = classnames();\n  const node$ = View(\n    {\n      type: \"p\",\n      class: class$.toString(),\n    },\n    children,\n  );\n  return {\n    t: \"view\",\n    append(node) {\n      return node$.append(node);\n    },\n    setContent(v) {\n      return node$.setContent(v);\n    },\n    render() {\n      return node$.render();\n    },\n    onMounted() {\n      if (node$.onMounted) {\n        node$.onMounted();\n      }\n      if (props.onMounted) {\n        props.onMounted();\n      }\n    },\n    beforeUnmounted() {\n      if (props.beforeUnmounted) {\n        props.beforeUnmounted();\n      }\n    },\n    onUnmounted() {\n      if (node$.onUnmounted) {\n        node$.onUnmounted();\n      }\n      if (props.onUnmounted) {\n        props.onUnmounted();\n      }\n    },\n  };\n}\n","import { ref, computed, classnames, isRef, isComponent } from \"./ui/core.js\";\nimport { View } from \"./ui/view.js\";\nimport { Match } from \"./ui/match.js\";\nimport { DangerouslyInnerHTML } from \"./ui/html.js\";\nimport { Input } from \"./ui/input.js\";\nimport { Checkbox } from \"./ui/checkbox.js\";\nimport { Select } from \"./ui/select.js\";\nimport { Presence } from \"./ui/presence.js\";\nimport { Portal } from \"./ui/portal.js\";\nimport { Popper } from \"./ui/popper.js\";\nimport { Toggle } from \"./ui/toggle.js\";\nimport { Slider } from \"./ui/slider.js\";\nimport { Progress } from \"./ui/progress.js\";\nimport {\n  Menu,\n  MenuItem,\n  MenuLabel,\n  MenuSeparator,\n  DropdownMenu,\n} from \"./ui/menu.js\";\nimport { Tabs } from \"./ui/tabs.js\";\nimport { Steps } from \"./ui/steps.js\";\nimport { Show } from \"./ui/show.js\";\nimport { For } from \"./ui/for.js\";\nimport { Flex } from \"./ui/flex.js\";\nimport { Button } from \"./ui/button.js\";\nimport { Txt } from \"./ui/text.js\";\nimport { ScrollView } from \"./ui/scrollview.js\";\nimport { Head2 } from \"./ui/head.js\";\nimport { Paragraph } from \"./ui/paragraph.js\";\n\n// Global assignments for backward compatibility\nwindow.ref = ref;\nwindow.computed = computed;\nwindow.classnames = classnames;\nwindow.isRef = isRef;\n\nwindow.Show = Show;\nwindow.For = For;\nwindow.Match = Match;\nwindow.View = View;\nwindow.Txt = Txt;\nwindow.Flex = Flex;\nwindow.Head2 = Head2;\nwindow.Paragraph = Paragraph;\nwindow.DangerouslyInnerHTML = DangerouslyInnerHTML;\nwindow.ScrollView = ScrollView;\nwindow.Button = Button;\nwindow.Input = Input;\nwindow.Checkbox = Checkbox;\nwindow.Select = Select;\nwindow.Presence = Presence;\nwindow.Portal = Portal;\nwindow.Popper = Popper;\nwindow.Toggle = Toggle;\nwindow.Switch = Toggle;\nwindow.Slider = Slider;\nwindow.Progress = Progress;\nwindow.Menu = Menu;\nwindow.MenuItem = MenuItem;\nwindow.MenuLabel = MenuLabel;\nwindow.MenuSeparator = MenuSeparator;\nwindow.DropdownMenu = DropdownMenu;\nwindow.Tabs = Tabs;\nwindow.Steps = Steps;\n\nexport {\n  ref,\n  computed,\n  classnames,\n  isRef,\n  isComponent,\n  Show,\n  For,\n  Match,\n  View,\n  Txt,\n  DangerouslyInnerHTML,\n  Flex,\n  Head2,\n  Paragraph,\n  //\n  Button,\n  Menu,\n  MenuItem,\n  MenuLabel,\n  MenuSeparator,\n  DropdownMenu,\n  // form\n  Input,\n  Checkbox,\n  Select,\n  Toggle,\n  Toggle as Switch,\n  Slider,\n  // content\n  ScrollView,\n  Tabs,\n  Steps,\n  //\n  Presence,\n  Portal,\n  Popper,\n  Progress,\n};\n"],"names":["ref","v","_v","deps","notify","patch","i","length","dep","onPatch","onChange","wrap_arr","arr","Proxy","get","target","prop","receiver","items","start","r","Array","prototype","push","apply","type","index","unshift","idx","pop","count","shift","deleteCount","splice","call","Reflect","set","value","oldLen","Number","exists","isNaN","item","isArray","__isRef","next_v","_subscribe","ctx","ignore","isRef","computed","consumer","depsObj","computeFn","computed_ref","_deps","_subscribers","_addDep","this","includes","_value","compute","notifySubscribers","next","createDepsProxy","sub","isComponent","render","classnames","classname","names","_names","String","split","__CN","del","filter","vv","add","append","c","segments","listen","toString","Boolean","join","View","props","children","style","id","tmpid","class","tmpcn","dataset","onMounted","onClick","onFocus","onBlur","restProps","$elm","document","createElement","Object","keys","forEach","k","setAttribute","class$","className","addEventListener","event","_children","t","node","beforeUnmounted","onUnmounted","setContent","html","innerHTML","result","appendChild","createTextNode","Match","renders","when","_when_ref","_prev_condition","view$","condition","console","log","DangerouslyInnerHTML","Input","store","setValue","events","methods","destroy","Checkbox","checked","Select","options","select","map","opt","label","Show","fallback","rest","_fallback","_whenRef","_nodes","nodes","$fragment","createDocumentFragment","$el","parentNode","Presence","animation","state","visible","draft","mounted","unsubscribe","onStateChange","enter","in","exit","out","Portal","body","removeChild","Popper","content$","ss","position","left","top","opacity","isPlaced","transform","Math","round","x","y","$e","setFloating","getRect","rect","getBoundingClientRect","Toggle","disabled","Slider","min","max","step","valueRef","containerRef","current","isDragging","cleanupDrag","percentage","val","updateValue","clientX","rawPercentage","width","newValue","steps","onPointerDown","e","setPointerCapture","pointerId","onPointerMove","moveEvent","onPointerUp","upEvent","releasePointerCapture","removeEventListener","track","thumb","elm","Progress","originalOnUnmounted","Menu","MenuItem","cn","handleClick","handleFocus","handleBlur","MenuLabel","MenuSeparator","DropdownMenu","handleClickOutside","menus","contains","popperEl","menu","popper","floating","closest","hide","currentTarget","clientHeight","clientWidth","toggle","presence","For","each","Txt","_items","_doms","_existing_map","Map","_render_item","empty","change","remaining_items","existing","size","delete","res","clear","old","replaceChild","oldItem","has","_update","_remove","_insert","_text","textContent","Tabs","active","Button","onclick","content","Steps","stepIndex","isCompleted","isCurrent","title","Flex","justify","ScrollView","progress$","indicator$","rotate","inDownOffset","display","outDownOffset","TimelessWeb","provide_ui_scroll_view_indicator","provide_ui_scroll_view_scroll","setRect","height","Head2","Paragraph","node$","window","Switch"],"mappings":"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"}